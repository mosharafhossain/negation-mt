
## Step 1: Download WMT-18 and WMT-19 corpora (required space: 1.6 GB)
cd data (required - current directory is the project directory)
run the script "download_wmt_files.sh" (required - execute permission of the script) \
```bash
sh download_wmt_files.sh
```

## Step 2: Set-up environment
Python 3.5+ (recommended: Python 3.6) \
Python packages: list of packages are provided in env-setup/requirements.txt file. \
Embedding: Download the file "glove.6B.300d.txt" from https://nlp.stanford.edu/projects/glove/ and put it in ./embeddings/globe directory

```bash
# Create virtual env (Assuming you have Python 3.5 or 3.6 installed in your machine) -> optional step
python3 -m venv your_location/negation-mt
source your_location/negation-mt/bin/activate

# Install required packages -> required step
pip install -r ./env-setup/requirements.txt
python -m spacy download en_core_web_sm
export HDF5_USE_FILE_LOCKING='FALSE'
```

## Step 3: Map source, reference, and system output (required space: 207MB)
```bash
python map.py
```
Mapping files are created in the below locations:  
WMT-18: ./output/map_scores/2018/  
WMT-19: ./output/map_scores/2019/  
​

## Step 4: Extract with and without negation
```bash
python extract_negation.py
```
Output files will be created in below locations: "map_scores" directory contains with and without negation files. Whereas, "info" directory contains token-level cue information.
WMT-18: ./output/map_scores/2018/  (e.g.,fien_uedin.5631_ref_neg.txt (with neg file), fien_uedin.5631_ref_noneg.txt (without neg file))
WMT-19: ./output/map_scores/2019/
WMT-18: ./output/info/2018/  
WMT-19: ./output/info/2019/

## Step 5: Generate ranking files
This step produces system-level ranking based on z-scores for WMT-2018 and WMT-2019. The result file also contains other numbers.
Please note that - For english to foreign language ditection: with and without negation samples are created based on on source language.
On the other hand, foreign to english direction, with and without negation samples are created based on reference translation.
```bash
python ranking.py
```
​
## Step 6: Results
The reported tables (1-4) can be generated by the given command. The results might differ slightly as the cue detector detects slightly
deferent negated sentences in each run (because of random initialization of the network weights in each run).
```bash
python results.py --table_no 1
```


